Algorithm for the 2017 Google HashCode edition.